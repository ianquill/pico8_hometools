pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
--particlesystem
--v01
--@iquill
fades={
0x0000,
0x8000,
0x8020,
0xa020,
0xa0a0,
0xa4a0,
0xa4a1,
0xa5a1,
0xa5a5,
0xe5a5,
0xe5b5,
0xf5b5,
0xf5f5,
0xfdf5,
0xfdf7,
0xfff7,
0xffff
}
function _init()
	particles={}
end

function _update()
	if btnp(❎) then
		for i=0,1000 do
			add(particles,{
			x=63,--default origin
			y=63,
			sx=rnd(2)-1,--random speed
			sy=rnd(2)-1,--random speed
			c=rnd(16),--random colors
			t=flr(rnd(500,1000)),--
			r=flr(rnd(10)),--radius
			p=0--fillpattern
			})
		end
	end
	--kill offscreen
	--move+
	for p in all(particles) do
		p.x+=p.sx
		if p.x>128 or p.x<0 then
			del(particles,p)
		end
		p.y+=p.sy
		if p.y>128 or p.y<0 then
			del(particles,p)
		end
		p.t-=1
		
		if p.t<=#fades then
			p.p+=1
		end
		
		if p.t<=0 then
			del(particles,p)
		end
		
	end
	
end

function _draw()
	cls(4)
	for p in all(particles) do
		fillp(p.p)
		circfill(p.x,p.y,p.r,p.c)
	end
	print(#particles)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
